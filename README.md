Система рассылки сообщений
=============================

Основная возможность проекта - рассылать уведомления через такие каналы как Email и Telegram.
---------------------------------------------------------------------------------------------
Так же проект имеет:
-функцию повоторной отправки сообщения,

-систему, которая учитывает часовые пояса пользователей,

-возможность хранить шаблоны сообщений,

-такую функцию как сбор статистики (собирает статистику по отправленным сообщениям),

-возможность логирования всех сообщений независимо от результат отправки.




Архитектура проекта:
--------------------
1. Проект имеет 5 моделей (Entity): **ContactInfo**, **MessageInfo**, **MessagePattern**, **Person**, **Statistic**.
      
    **ContactInfo** отвечает за информацию об пользователе.
      Включает такие поля как id, email, number, telegramName, person (связь с пользователем - OneToOne)

    **MessageInfo** отвечает за информацию об сообщении. 
      Включает такие поля как id, pattern (связь с шаблоном сообщения - ManyToOne), person (связь с пользователем - ManyToOne), 
      date (дата отправки), status отправки, zoneId (определение часового пояса)

    **MessagePattern** отвечает за шаблоны сообщений.
      Включает такие поля как id, template(сообщение шаблона)

    **Person** отвечает за пользователей.
      Включает такие поля как id, name, timeZone, contactInfo (связь с информацией об пользователе - OneToOne)

    **Statistic** отвечает за статистику проекта. 
      Включает такие поля как id, person(связь с пользователем - ManyToOne), message, email, telegram, number, date.

2. Сервисы по отправке сообщений.
        
    **ServiceEmail** отсылает сообщения на электронную почту.

    **TelegramService** отсылает сообщения на приложение Telegram. 

    **SenderService** отвечает за саму рассылку сообщений. состоит из Handler и MessageBuilder

    **Handler** проверяет в определенный период времени статусы MessageInfo в БД, если false передает их в MessageBuilder.

    **MessageBuilder** отправляет сообщения пользователям, логирует сообщения,
      отправляет MessageInfo с новыми статусами в Handler, передает отправленные сообщеня в БД (Statistic)


3. Rest Api приложения.

    **ContactInfoApi**. Имеет такие методы как создание, обновление по id, удаление по id.

    **MessageInfoApi**. Имеет такие методы как создание, обновление по id, удаление по id, получение по id, получение всех MessageInfo.

    **MessagePatternApi**. Имеет такие методы как создание, обновление по id, удаление по id, получение по id, получение всех MessagePatternApi.

    **PersonApi**. Имеет такие методы как создание, обновление по id, удаление по id, получение по id, получение всех Person.

    **StatisticApi**. Имеет такие методы как создание, обновление по id, удаление по id, получение по id, получение всех Statistic,
      получение Statistic по id person, получение всех сообщений отправленных на Email, получение всех сообщений отправленных на Telegram.
 
 Технологии исползуемые в проекте:
 ----------------------------------
  -[система миграций ДБ(Flyway)](https://flywaydb.org)

  -[Swagger](https://swagger.io)

  -[Openshift (okd4)](https://www.okd.io)

  -[PostgreSQL](https://www.postgresql.org)

  -[Lombok](https://projectlombok.org/setup/maven)

  -[TelegramApi](https://core.telegram.org)

  -[EmailApi](https://habr.com/ru/post/526162/)
